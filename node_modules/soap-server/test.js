
var soap = require('./lib/soap-server');

function MyTestObjectIn(params) {};
MyTestObjectIn.prototype.intArg = 1;
MyTestObjectIn.prototype.strArg = '';

function MyTestObjectOut(){};
MyTestObjectOut.prototype.strArg = '';
MyTestObjectOut.prototype.intArg = 0;


function MyObject(){};
MyObject.prototype.concated = '';
MyObject.prototype.incremented = 0;

function MyTestService(){};

// MyTestService.prototype.test1 = function(myArg1, myArg2){
// 	return myArg1 + myArg2;
// };
// MyTestService.prototype.test2 = function(myArg1, myArg2){
// 	return myArg1 + myArg2;
// };
// MyTestService.prototype.test3 = function(strArg, intArg){
// 	var ret = new MyObject();
// 	ret.concated = strArg + '[' + intArg + ']';
// 	ret.incremented = intArg + 1;
// 	return ret;
// };
MyTestService.prototype.test4 = function(MyTestObjectIn){
	return MyTestObjectIn.strArg + '[' + (MyTestObjectIn.intArg+1) + ']';
};

var soapServer = new soap.SoapServer({tns:'127.0.0.1:1337'});
var soapService = soapServer.addService('testService', new MyTestService());

// var test2operation = soapService.getOperation('test2');
// test2operation.setOutputType('number');
// test2operation.setInputType('myArg1', {type: 'number'});
// test2operation.setInputType('myArg2', {type: 'number'});

// var test3operation = soapService.getOperation('test3');
// test3operation.setOutputType(MyObject, 'MyObject');
// test3operation.setInputType('intArg', {type: 'number'});

var test4operation = soapService.getOperation('test4');
test4operation.setOutputType(MyTestObjectOut, 'MyTestObjectOut');
test4operation.setInputType('MyTestObjectIn', MyTestObjectIn);


soapServer.listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/');
